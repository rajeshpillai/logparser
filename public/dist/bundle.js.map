{"version":3,"file":"bundle.js","mappings":";;;;;;;;;;;;;;;;IAAqBA;AACnB,qBAAYC,EAAZ,EAAgB;AAAA;;AACd,SAAKA,EAAL,GAASA,EAAT;AACD;;;;WAED,4BAAoB;AAClB,UAAIC,IAAI,GAAG,IAAX;AACAC,MAAAA,CAAC,CAAC,YAAD,CAAD,CAAgBC,EAAhB,CAAmB,OAAnB,EAA4B,UAAUC,CAAV,EAAa;AACvCA,QAAAA,CAAC,CAACC,cAAF;AACA,YAAIC,MAAM,GAAGF,CAAC,CAACE,MAAf;AAEAJ,QAAAA,CAAC,CAAC,UAAD,CAAD,CAAcK,IAAd,CAAmB,YAAW;AAC5BL,UAAAA,CAAC,CAAC,IAAD,CAAD,CAAQM,WAAR,CAAoB,QAApB;AACD,SAFD;AAGAN,QAAAA,CAAC,CAACI,MAAD,CAAD,CAAUG,WAAV,CAAsB,QAAtB;AAEA,YAAIC,OAAO,GAAGJ,MAAM,CAACK,IAAP,CAAYC,MAAZ,CAAmBN,MAAM,CAACK,IAAP,CAAYE,WAAZ,CAAwB,GAAxB,IAA+B,CAAlD,CAAd;AAEAX,QAAAA,CAAC,CAAC,YAAD,CAAD,CAAgBY,IAAhB,mBAAgCJ,OAAhC;AAEAK,QAAAA,MAAM,CAACC,OAAP,CAAeC,SAAf,CACE,EADF,EAEEb,CAAC,CAACE,MAAF,CAASK,IAFX,EAGEP,CAAC,CAACE,MAAF,CAASK,IAHX;AAMAV,QAAAA,IAAI,CAACiB,SAAL,CAAed,CAAC,CAACE,MAAF,CAASK,IAAxB;AACD,OApBD;AAqBD;;;WAED,mBAAUQ,GAAV,EAAe;AAAA;;AACb,UAAIA,GAAG,IAAI,GAAX,EAAgB;AAChBC,MAAAA,IAAI,CAACC,IAAL,CAAU;AACRC,QAAAA,IAAI,EAAE,kBADE;AAERC,QAAAA,gBAAgB,EAAE,KAFV;AAGRC,QAAAA,iBAAiB,EAAE;AAHX,OAAV;AAMA,UAAMC,OAAO,GAAG;AACdC,QAAAA,MAAM,EAAE,KADM;AAEdC,QAAAA,OAAO,EAAE,IAAIC,OAAJ,CAAY;AAAC,0BAAgB;AAAjB,SAAZ,CAFK;AAGdC,QAAAA,IAAI,EAAE;AAHQ,OAAhB;;AAMA,UAAI;AACFC,QAAAA,KAAK,CAACX,GAAD,EAAMM,OAAN,CAAL,CACCM,IADD,CACM,UAAAC,QAAQ,EAAI;AAChB,iBAAOA,QAAQ,CAACC,IAAT,EAAP;AACD,SAHD,EAGGF,IAHH,CAGQ,UAAAG,IAAI,EAAI;AACd,eAAI,CAACC,gBAAL,CAAsBD,IAAtB;;AACAd,UAAAA,IAAI,CAACgB,KAAL;AACD,SAND;AAOD,OARD,CAQE,OAAMhC,CAAN,EAAS;AACTgB,QAAAA,IAAI,CAACgB,KAAL;AACAC,QAAAA,KAAK,CAACjC,CAAD,CAAL;AACD;AACF;;;WAED,sBAAakC,KAAb,EAAoB;AAClB,UAAIC,OAAO,GAAGrC,CAAC,CAAC,mBAAD,CAAf;AACAqC,MAAAA,OAAO,CAACzB,IAAR,CAAa,EAAb;AACA,UAAI0B,EAAE,KAAN;;AAEA,sCAAgBC,MAAM,CAACC,IAAP,CAAYJ,KAAZ,CAAhB,kCAAoC;AAA/B,YAAIK,GAAG,mBAAP;AACHC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,GAAG,MAAN,GAAeL,KAAK,CAACK,GAAD,CAAhC;AACAH,QAAAA,EAAE,iFAEoBF,KAAK,CAACK,GAAD,CAFzB,kCAGQA,GAHR,kCAAF;AAMD;;AAEDJ,MAAAA,OAAO,CAACzB,IAAR,0CAA6C0B,EAA7C;AAEAM,MAAAA,UAAU,CAAC,aAAD,EAAgB,OAAhB,CAAV;AACD;;;WAGD,0BAAiBZ,IAAjB,EAAuB;AACrB,UAAIa,SAAS,GAAG7C,CAAC,CAAC,OAAD,CAAD,CAAW8C,SAAX,EAAhB;AACAD,MAAAA,SAAS,CAACE,KAAV,GAAkBC,IAAlB,GAFqB,CAGrB;;AACAH,MAAAA,SAAS,CAACI,IAAV,CAAeC,GAAf,CAAmBlB,IAAI,CAACmB,KAAxB;AAEAN,MAAAA,SAAS,CAACO,OAAV,CAAkBC,MAAlB,GAA2BL,IAA3B;AAEA,WAAKM,YAAL,CAAkBtB,IAAI,CAACuB,gBAAvB;AAEAX,MAAAA,UAAU,CAAC,OAAD,EAAU,YAAV,CAAV;AACD;;;WAGD,0BAAiB;AAAA;;AACf;AACA5C,MAAAA,CAAC,CAAC,UAASA,CAAT,EAAY;AACZ,YAAIwD,IAAI,GAAG3C,MAAM,CAAC4C,QAAP,CAAgBhD,IAA3B;AACAT,QAAAA,CAAC,CAAC,UAAD,CAAD,CAAcK,IAAd,CAAmB,YAAW;AAC5BqC,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAKlC,IAAjB,EAAuB+C,IAAvB;;AACF,cAAI,KAAK/C,IAAL,KAAc+C,IAAlB,EAAwB;AACtBxD,YAAAA,CAAC,CAAC,IAAD,CAAD,CAAQO,WAAR,CAAoB,QAApB;AACAP,YAAAA,CAAC,CAAC,YAAD,CAAD,CAAgB0D,SAAhB,GAA4B,YAAYF,IAAxC;AACD;AACA,SAND;AAOD,OATA,CAAD;AAWAxD,MAAAA,CAAC,CAAC2D,QAAD,CAAD,CAAYC,KAAZ,CAAkB,YAAM;AACtB,cAAI,CAAC5C,SAAL,CAAeH,MAAM,CAAC4C,QAAP,CAAgBI,QAA/B;;AACAhD,QAAAA,MAAM,CAACiD,UAAP,GAAoB,YAAM;AACxB,gBAAI,CAAC9C,SAAL,CAAeH,MAAM,CAAC4C,QAAP,CAAgBI,QAA/B;AACD,SAFD,CAFsB,CAMtB;;;AACA7D,QAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoB+D,KAApB,CAA0B,IAA1B,EAAgCC,QAAhC,CAA0C,aAA1C;AACAhE,QAAAA,CAAC,CAAC,yBAAD,CAAD,CAA6BK,IAA7B,CAAmC,UAAU4D,CAAV,EAAa;AAC9C,cAAIC,KAAK,GAAGlE,CAAC,CAAC,IAAD,CAAD,CAAQoB,IAAR,EAAZ;AACApB,UAAAA,CAAC,CAAC,IAAD,CAAD,CAAQY,IAAR,yCAA6CqD,CAA7C,wDAAyFC,KAAzF;AACD,SAHD;AAKAlE,QAAAA,CAAC,CAAC,OAAD,CAAD,CAAWmE,UAAX,CAAsB,OAAtB,EAA+BrB,SAA/B,CAAyC;AACvCd,UAAAA,IAAI,EAAE,EADiC;AAEvCoC,UAAAA,aAAa,EAAE,IAFwB;AAGvChB,UAAAA,OAAO,EAAE,CACP;AAAEpB,YAAAA,IAAI,EAAE;AAAR,WADO,EAEP;AAAEA,YAAAA,IAAI,EAAE;AAAR,WAFO,EAGP;AAAEA,YAAAA,IAAI,EAAE;AAAR,WAHO,EAIP;AAAEA,YAAAA,IAAI,EAAE;AAAR,WAJO,EAKP;AAAEA,YAAAA,IAAI,EAAE;AAAR,WALO,EAMP;AAAEA,YAAAA,IAAI,EAAE;AAAR,WANO,CAH8B;AAWvCqC,UAAAA,OAAO,EAAS,OAXuB;AAYvCC,UAAAA,OAAO,EAAS,IAZuB;AAavCC,UAAAA,cAAc,EAAE,IAbuB;AAcvCC,UAAAA,YAAY,EAAE,IAdyB;AAgBvCC,UAAAA,YAAY,EAAE,wBAAY;AACxBzE,YAAAA,CAAC,CAAC,aAAD,CAAD,CAAiBC,EAAjB,CAAqB,oBAArB,EAA2C,UAASC,CAAT,EAAY;AACrDA,cAAAA,CAAC,CAACwE,wBAAF;AACA,kBAAIC,QAAQ,GAAG3E,CAAC,CAAC,IAAD,CAAD,CAAQgC,IAAR,CAAa,KAAb,CAAf;AACAhC,cAAAA,CAAC,CAAC,OAAD,CAAD,CAAW8C,SAAX,GAAuB8B,MAAvB,CAA8BD,QAA9B,EAAwCE,MAAxC,CAA+C3E,CAAC,CAACE,MAAF,CAAS0E,KAAxD,EAA+D9B,IAA/D;AACD,aAJD;AAKD;AAtBsC,SAAzC;AAwBD,OArCD;AAsCD;;;WAED,gBAAO+B,KAAP,EAAc;AACZ,WAAKC,cAAL;AACA,WAAKC,gBAAL;AACA,aAAO,IAAP;AACD;;;;;;;;;;;;;;;;ACtJY;AACf;AACA;AACA;AACA;;;;;;;;;;ACJA;AACA,kBAAkB,kBAAkB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe;AACf;AACA;AACA;AACA;;;;;UCdA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;ACNA;AACA,IAAMC,SAAS,GAAG,IAAIrF,wDAAJ,CAAc,OAAd,CAAlB;AAEAqF,SAAS,CAACC,MAAV,G","sources":["webpack://dc-logs/./public/app/pages/logviewer.js","webpack://dc-logs/./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack://dc-logs/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://dc-logs/webpack/bootstrap","webpack://dc-logs/webpack/runtime/define property getters","webpack://dc-logs/webpack/runtime/hasOwnProperty shorthand","webpack://dc-logs/webpack/runtime/make namespace object","webpack://dc-logs/./public/app/index.js"],"sourcesContent":["export default class LogViewer {\n  constructor(el) {\n    this.el =el; \n  }\n\n  componentMounted () {\n    let that = this;\n    $(\".file-name\").on(\"click\", function (e) {\n      e.preventDefault();\n      let target = e.target;\n\n      $('.files a').each(function() {\n        $(this).removeClass('active');\n      });\n      $(target).toggleClass('active');\n\n      let logName = target.href.substr(target.href.lastIndexOf('/') + 1);\n\n      $(\"#log-title\").html(`LOGS -  ${logName} >`);\n\n      window.history.pushState(\n        {},\n        e.target.href,\n        e.target.href\n      )\n\n      that.fetchData(e.target.href);\n    });\n  }\n\n  fetchData(url) {\n    if (url == \"/\") return;\n    Swal.fire({\n      text: \"Loading logs....\",\n      showCancelButton: false,\n      showConfirmButton: false\n    })\n  \n    const options = {\n      method: \"GET\",\n      headers: new Headers({'content-type': 'application/json'}),\n      mode: 'cors'\n    };\n  \n    try {\n      fetch(url, options)\n      .then(response => {\n        return response.json();\n      }).then(data => {  \n        this.refreshDataTable(data);\n        Swal.close();\n      });\n    } catch(e) {\n      Swal.close();\n      alert(e);\n    }\n  }\n\n  refreshStats(stats) {\n    let stats_c = $(\"#stats_controller\");\n    stats_c.html(\"\");\n    let ui = ``;\n  \n    for (var key of Object.keys(stats)) {\n      console.log(key + \" -> \" + stats[key])\n      ui += `\n        <div class=\"stats-item \">\n          <h4 class=\"kpi\">${stats[key]}</h4>\n          <h6>${key}</h6>\n        </div>\n      `\n    }\n  \n    stats_c.html(`<div class=\"stats-container\">${ui}</div>`);\n  \n    animateCSS(\".stats-item\", \"pulse\");\n  }\n  \n\n  refreshDataTable(data) {\n    var dataTable = $(\"#logs\").DataTable();\n    dataTable.clear().draw();\n    //dataTable.rows.add(data).draw();\n    dataTable.rows.add(data.items);\n  \n    dataTable.columns.adjust().draw();\n  \n    this.refreshStats(data.stats_controller);\n  \n    animateCSS(\"#logs\", \"backInLeft\");\n  }\n  \n\n  setupDataTable() {\n    // Set active links\n    $(function($) {\n      var path = window.location.href; \n      $('.files a').each(function() {\n        console.log(this.href, path);\n      if (this.href === path) {\n        $(this).toggleClass('active');\n        $(\"#log-title\").innerHTML = \"LOGS - \" + path;\n      }\n      });\n    });\n\n    $(document).ready(() => {\n      this.fetchData(window.location.pathname);\n      window.onpopstate = () => {\n        this.fetchData(window.location.pathname);\n      }\n\n      // Setup - add a text input to each footer cell\n      $('#logs thead tr').clone(true).appendTo( '#logs thead' );\n      $('#logs thead tr:eq(1) th').each( function (i) {\n        var title = $(this).text();\n        $(this).html( `<input type=\"text\" data-col=${i} class=\"col-search\" placeholder=\"Search ${title}\" />` );\n      });\n      \n      $('#logs').removeAttr(\"width\").DataTable({\n        data: [],\n        orderCellsTop: true,\n        columns: [\n          { data: 'date' },\n          { data: 'time' },\n          { data: 'ip' },\n          { data: 'method' },\n          { data: 'path' },\n          { data: 'controller' },\n        ],\n        scrollY:        \"300px\",\n        scrollX:        true,\n        scrollCollapse: true,\n        fixedColumns: true,\n\n        initComplete: function () {\n          $(\".col-search\").on( 'keyup change clear', function(e) {\n            e.stopImmediatePropagation();\n            let colIndex = $(this).data(\"col\");\n            $(\"#logs\").DataTable().column(colIndex).search(e.target.value).draw()\n          });\n        }\n      });\n    })\n  }\n\n  render(files) {\n    this.setupDataTable();\n    this.componentMounted();\n    return this;\n  }\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import LogViewer from './pages/logviewer.js';\nconst logViewer = new LogViewer(\"#root\");\n\nlogViewer.render();"],"names":["LogViewer","el","that","$","on","e","preventDefault","target","each","removeClass","toggleClass","logName","href","substr","lastIndexOf","html","window","history","pushState","fetchData","url","Swal","fire","text","showCancelButton","showConfirmButton","options","method","headers","Headers","mode","fetch","then","response","json","data","refreshDataTable","close","alert","stats","stats_c","ui","Object","keys","key","console","log","animateCSS","dataTable","DataTable","clear","draw","rows","add","items","columns","adjust","refreshStats","stats_controller","path","location","innerHTML","document","ready","pathname","onpopstate","clone","appendTo","i","title","removeAttr","orderCellsTop","scrollY","scrollX","scrollCollapse","fixedColumns","initComplete","stopImmediatePropagation","colIndex","column","search","value","files","setupDataTable","componentMounted","logViewer","render"],"sourceRoot":""}